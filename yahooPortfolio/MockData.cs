using System.Collections.Generic;
using Newtonsoft.Json;

namespace yahooPortfolio
{
    public static class StockData
    {
        static string GOOG = @"{
  'chart': {
    'result': [
      {
        'meta': {
          'currency': 'USD',
          'symbol': 'GOOG',
          'exchangeName': 'NMS',
          'instrumentType': 'EQUITY',
          'firstTradeDate': 1092922200,
          'regularMarketTime': 1605906001,
          'gmtoffset': -18000,
          'timezone': 'EST',
          'exchangeTimezoneName': 'America/New_York',
          'regularMarketPrice': 1742.19,
          'chartPreviousClose': 917.79,
          'priceHint': 2,
          'currentTradingPeriod': {
            'pre': {
              'timezone': 'EST',
              'start': 1605862800,
              'end': 1605882600,
              'gmtoffset': -18000
            },
            'regular': {
              'timezone': 'EST',
              'start': 1605882600,
              'end': 1605906000,
              'gmtoffset': -18000
            },
            'post': {
              'timezone': 'EST',
              'start': 1605906000,
              'end': 1605920400,
              'gmtoffset': -18000
            }
          },
          'dataGranularity': '1d',
          'range': '',
          'validRanges': [ '1d', '5d', '1mo', '3mo', '6mo', '1y', '2y', '5y', '10y', 'ytd', 'max' ]
        },
        'timestamp': [ 1498829400, 1499088600, 1499261400, 1499347800, 1499434200, 1499693400, 1499779800, 1499866200, 1499952600, 1500039000, 1500298200, 1500384600, 1500471000, 1500557400, 1500643800, 1500903000, 1500989400, 1501075800, 1501162200, 1501248600 ],
        'indicators': {
          'quote': [
            {
              'high': [ 926.0499877929688, 913.9400024414062, 914.510009765625, 914.9439697265625, 921.5399780273438, 930.3800048828125, 931.4299926757812, 946.2999877929688, 954.4500122070312, 956.9099731445312, 960.739990234375, 968.0399780273438, 973.0399780273438, 975.9000244140625, 973.22998046875, 986.2000122070312, 959.7000122070312, 955.0, 951.780029296875, 943.8300170898438 ],
              'volume': [ 2090200, 1709800, 1813900, 1424500, 1637800, 1192800, 1113200, 1532100, 1294700, 1053800, 1165500, 1154000, 1224500, 1624500, 1711000, 3248300, 4661000, 2088300, 3213000, 1846400 ],
              'open': [ 926.0499877929688, 912.1799926757812, 901.760009765625, 904.1199951171875, 908.8499755859375, 921.77001953125, 929.5399780273438, 938.6799926757812, 946.2899780273438, 952.0, 957.0, 953.0, 967.8400268554688, 975.0, 962.25, 972.219970703125, 953.8099975585938, 954.6799926757812, 951.780029296875, 929.4000244140625 ],
              'low': [ 908.3099975585938, 894.7899780273438, 898.5, 899.7000122070312, 908.8499755859375, 919.5900268554688, 922.0, 934.469970703125, 943.010009765625, 948.0050048828125, 949.2410278320312, 950.5999755859375, 964.030029296875, 961.510009765625, 960.1500244140625, 970.77001953125, 945.4000244140625, 942.2789916992188, 920.0, 927.5 ],
              'close': [ 908.72998046875, 898.7000122070312, 911.7100219726562, 906.6900024414062, 918.5900268554688, 928.7999877929688, 930.0900268554688, 943.8300170898438, 947.1599731445312, 955.989990234375, 953.4199829101562, 965.4000244140625, 970.8900146484375, 968.1500244140625, 972.9199829101562, 980.3400268554688, 950.7000122070312, 947.7999877929688, 934.0900268554688, 941.530029296875 ]
            }
          ],
          'adjclose': [ { 'adjclose': [ 908.72998046875, 898.7000122070312, 911.7100219726562, 906.6900024414062, 918.5900268554688, 928.7999877929688, 930.0900268554688, 943.8300170898438, 947.1599731445312, 955.989990234375, 953.4199829101562, 965.4000244140625, 970.8900146484375, 968.1500244140625, 972.9199829101562, 980.3400268554688, 950.7000122070312, 947.7999877929688, 934.0900268554688, 941.530029296875 ] } ]
        }
      }
    ],
    'error': null
  }
}";
        static string NFLX = @"{
  'chart': {
    'result': [
      {
        'meta': {
          'currency': 'USD',
          'symbol': 'NFLX',
          'exchangeName': 'NMS',
          'instrumentType': 'EQUITY',
          'firstTradeDate': 1022160600,
          'regularMarketTime': 1605906001,
          'gmtoffset': -18000,
          'timezone': 'EST',
          'exchangeTimezoneName': 'America/New_York',
          'regularMarketPrice': 488.24,
          'chartPreviousClose': 150.09,
          'priceHint': 2,
          'currentTradingPeriod': {
            'pre': {
              'timezone': 'EST',
              'start': 1605862800,
              'end': 1605882600,
              'gmtoffset': -18000
            },
            'regular': {
              'timezone': 'EST',
              'start': 1605882600,
              'end': 1605906000,
              'gmtoffset': -18000
            },
            'post': {
              'timezone': 'EST',
              'start': 1605906000,
              'end': 1605920400,
              'gmtoffset': -18000
            }
          },
          'dataGranularity': '1d',
          'range': '',
          'validRanges': [ '1d', '5d', '1mo', '3mo', '6mo', '1y', '2y', '5y', '10y', 'ytd', 'max' ]
        },
        'timestamp': [ 1498829400, 1499088600, 1499261400, 1499347800, 1499434200, 1499693400, 1499779800, 1499866200, 1499952600, 1500039000, 1500298200, 1500384600, 1500471000, 1500557400, 1500643800, 1500903000, 1500989400, 1501075800, 1501162200, 1501248600 ],
        'indicators': {
          'quote': [
            {
              'high': [ 150.7100067138672, 150.4499969482422, 148.25999450683594, 147.27000427246094, 150.75, 153.22999572753906, 155.22999572753906, 158.8000030517578, 160.1300048828125, 161.35000610351562, 163.5500030517578, 185.0, 187.1699981689453, 185.9199981689453, 191.5, 190.25, 188.66000366210938, 189.6999969482422, 190.0, 185.02999877929688 ],
              'volume': [ 5213300, 3908200, 4627800, 5486500, 5561300, 5360600, 4898600, 8481800, 6700100, 5549200, 17496700, 41587400, 17344300, 7907200, 9277400, 8797300, 5374500, 4479300, 11221000, 6201900 ],
              'open': [ 149.75999450683594, 149.8000030517578, 146.5800018310547, 146.1300048828125, 146.64999389648438, 150.33999633789062, 152.3699951171875, 155.77000427246094, 158.50999450683594, 159.3000030517578, 162.91000366210938, 176.1199951171875, 182.97000122070312, 183.83999633789062, 182.72000122070312, 188.69000244140625, 187.7899932861328, 187.6999969482422, 189.88999938964844, 182.0 ],
              'low': [ 148.4199981689453, 145.8000030517578, 145.5800018310547, 144.25, 146.64999389648438, 149.64999389648438, 151.5500030517578, 155.77000427246094, 156.97999572753906, 157.97000122070312, 160.02000427246094, 174.24000549316406, 181.75, 182.6999969482422, 182.7100067138672, 187.00999450683594, 185.80999755859375, 187.50999450683594, 179.3800048828125, 181.17999267578125 ],
              'close': [ 149.41000366210938, 146.1699981689453, 147.61000061035156, 146.25, 150.17999267578125, 152.6699981689453, 154.3300018310547, 158.75, 158.2100067138672, 161.1199951171875, 161.6999969482422, 183.60000610351562, 183.86000061035156, 183.60000610351562, 188.5399932861328, 187.91000366210938, 186.97000122070312, 189.0800018310547, 182.67999267578125, 184.0399932861328 ]
            }
          ],
          'adjclose': [ { 'adjclose': [ 149.41000366210938, 146.1699981689453, 147.61000061035156, 146.25, 150.17999267578125, 152.6699981689453, 154.3300018310547, 158.75, 158.2100067138672, 161.1199951171875, 161.6999969482422, 183.60000610351562, 183.86000061035156, 183.60000610351562, 188.5399932861328, 187.91000366210938, 186.97000122070312, 189.0800018310547, 182.67999267578125, 184.0399932861328 ] } ]
        }
      }
    ],
    'error': null
  }
}";
        static string AMZN = @"{
  'chart': {
    'result': [
      {
        'meta': {
          'currency': 'USD',
          'symbol': 'AMZN',
          'exchangeName': 'NMS',
          'instrumentType': 'EQUITY',
          'firstTradeDate': 863703000,
          'regularMarketTime': 1605906001,
          'gmtoffset': -18000,
          'timezone': 'EST',
          'exchangeTimezoneName': 'America/New_York',
          'regularMarketPrice': 3099.4,
          'chartPreviousClose': 975.93,
          'priceHint': 2,
          'currentTradingPeriod': {
            'pre': {
              'timezone': 'EST',
              'start': 1605862800,
              'end': 1605882600,
              'gmtoffset': -18000
            },
            'regular': {
              'timezone': 'EST',
              'start': 1605882600,
              'end': 1605906000,
              'gmtoffset': -18000
            },
            'post': {
              'timezone': 'EST',
              'start': 1605906000,
              'end': 1605920400,
              'gmtoffset': -18000
            }
          },
          'dataGranularity': '1d',
          'range': '',
          'validRanges': [ '1d', '5d', '1mo', '3mo', '6mo', '1y', '2y', '5y', '10y', 'ytd', 'max' ]
        },
        'timestamp': [ 1498829400, 1499088600, 1499261400, 1499347800, 1499434200, 1499693400, 1499779800, 1499866200, 1499952600, 1500039000, 1500298200, 1500384600, 1500471000, 1500557400, 1500643800, 1500903000, 1500989400, 1501075800, 1501162200, 1501248600 ],
        'indicators': {
          'quote': [
            {
              'high': [ 983.469970703125, 974.489990234375, 975.0, 974.4000244140625, 980.1099853515625, 999.4400024414062, 995.989990234375, 1008.5499877929688, 1006.8800048828125, 1004.4500122070312, 1014.75, 1026.030029296875, 1031.5899658203125, 1034.969970703125, 1026.0999755859375, 1043.010009765625, 1043.3299560546875, 1053.199951171875, 1083.31005859375, 1032.8499755859375 ],
              'volume': [ 3390300, 2909100, 3653000, 3259600, 2643400, 3546300, 2982700, 3608600, 2880800, 2102500, 3712600, 4007600, 2964000, 3097500, 2734600, 3288000, 2447600, 2921300, 10991700, 7709400 ],
              'open': [ 980.1199951171875, 972.7899780273438, 961.530029296875, 964.6599731445312, 969.5499877929688, 985.0, 993.0, 1000.6500244140625, 1004.6199951171875, 1002.4000244140625, 1004.6900024414062, 1006.0, 1025.0, 1031.5899658203125, 1021.280029296875, 1028.3399658203125, 1038.050048828125, 1043.199951171875, 1069.550048828125, 1012.1400146484375 ],
              'low': [ 967.6099853515625, 951.0, 955.25, 959.02001953125, 969.1400146484375, 983.5, 983.719970703125, 998.0999755859375, 995.9000244140625, 996.8900146484375, 1003.8099975585938, 1004.0, 1022.5, 1022.52001953125, 1011.0, 1027.4300537109375, 1032.47998046875, 1043.199951171875, 1040.1800537109375, 1001.0 ],
              'close': [ 968.0, 953.6599731445312, 971.4000244140625, 965.1400146484375, 978.760009765625, 996.469970703125, 994.1300048828125, 1006.510009765625, 1000.6300048828125, 1001.8099975585938, 1010.0399780273438, 1024.449951171875, 1026.8699951171875, 1028.699951171875, 1025.6700439453125, 1038.949951171875, 1039.8699951171875, 1052.800048828125, 1046.0, 1020.0399780273438 ]
            }
          ],
          'adjclose': [ { 'adjclose': [ 968.0, 953.6599731445312, 971.4000244140625, 965.1400146484375, 978.760009765625, 996.469970703125, 994.1300048828125, 1006.510009765625, 1000.6300048828125, 1001.8099975585938, 1010.0399780273438, 1024.449951171875, 1026.8699951171875, 1028.699951171875, 1025.6700439453125, 1038.949951171875, 1039.8699951171875, 1052.800048828125, 1046.0, 1020.0399780273438 ] } ]
        }
      }
    ],
    'error': null
  }
}";
        static string FB = @"{
  'chart': {
    'result': [
      {
        'meta': {
          'currency': 'USD',
          'symbol': 'FB',
          'exchangeName': 'NMS',
          'instrumentType': 'EQUITY',
          'firstTradeDate': 1337347800,
          'regularMarketTime': 1605906002,
          'gmtoffset': -18000,
          'timezone': 'EST',
          'exchangeTimezoneName': 'America/New_York',
          'regularMarketPrice': 269.7,
          'chartPreviousClose': 151.04,
          'priceHint': 2,
          'currentTradingPeriod': {
            'pre': {
              'timezone': 'EST',
              'start': 1605862800,
              'end': 1605882600,
              'gmtoffset': -18000
            },
            'regular': {
              'timezone': 'EST',
              'start': 1605882600,
              'end': 1605906000,
              'gmtoffset': -18000
            },
            'post': {
              'timezone': 'EST',
              'start': 1605906000,
              'end': 1605920400,
              'gmtoffset': -18000
            }
          },
          'dataGranularity': '1d',
          'range': '',
          'validRanges': [ '1d', '5d', '1mo', '3mo', '6mo', '1y', '2y', '5y', '10y', 'ytd', 'max' ]
        },
        'timestamp': [ 1498829400, 1499088600, 1499261400, 1499347800, 1499434200, 1499693400, 1499779800, 1499866200, 1499952600, 1500039000, 1500298200, 1500384600, 1500471000, 1500557400, 1500643800, 1500903000, 1500989400, 1501075800, 1501162200, 1501248600 ],
        'indicators': {
          'quote': [
            {
              'open': [ 151.89999389648438, 151.72000122070312, 149.0, 149.02999877929688, 149.25, 151.69000244140625, 153.3699951171875, 156.49000549316406, 158.74000549316406, 160.1300048828125, 160.25, 159.66000366210938, 163.58999633789062, 164.8000030517578, 164.16000366210938, 164.63999938964844, 165.00999450683594, 166.00999450683594, 174.6999969482422, 169.07000732421875 ],
              'high': [ 151.9199981689453, 152.14999389648438, 150.85000610351562, 150.0399932861328, 151.99000549316406, 153.97999572753906, 155.4199981689453, 159.16000366210938, 159.77999877929688, 160.32000732421875, 160.77999877929688, 163.72999572753906, 165.6999969482422, 165.0, 165.0500030517578, 166.1699981689453, 165.5399932861328, 166.00999450683594, 175.49000549316406, 173.42999267578125 ],
              'volume': [ 17666000, 13862700, 14334300, 14951800, 13615900, 13378700, 13667700, 22739400, 13929200, 16371200, 12858800, 23722900, 26273600, 18523100, 14744000, 17367000, 15383200, 35236900, 68910700, 24557600 ],
              'low': [ 150.05999755859375, 147.8000030517578, 148.1300048828125, 148.0, 149.19000244140625, 151.50999450683594, 152.91000366210938, 156.1999969482422, 158.4199981689453, 159.3300018310547, 158.80999755859375, 159.4199981689453, 163.1699981689453, 162.80999755859375, 163.75, 164.30999755859375, 163.86000061035156, 164.10000610351562, 167.5, 169.0500030517578 ],
              'close': [ 150.97999572753906, 148.42999267578125, 150.33999633789062, 148.82000732421875, 151.44000244140625, 153.5, 155.27000427246094, 158.89999389648438, 159.25999450683594, 159.97000122070312, 159.72999572753906, 162.86000061035156, 164.13999938964844, 164.52999877929688, 164.42999267578125, 166.0, 165.27999877929688, 165.61000061035156, 170.44000244140625, 172.4499969482422 ]
            }
          ],
          'adjclose': [ { 'adjclose': [ 150.97999572753906, 148.42999267578125, 150.33999633789062, 148.82000732421875, 151.44000244140625, 153.5, 155.27000427246094, 158.89999389648438, 159.25999450683594, 159.97000122070312, 159.72999572753906, 162.86000061035156, 164.13999938964844, 164.52999877929688, 164.42999267578125, 166.0, 165.27999877929688, 165.61000061035156, 170.44000244140625, 172.4499969482422 ] } ]
        }
      }
    ],
    'error': null
  }
}";
        public static List<TimeAndPrice> getAMZN()
        {
            return getTimestampAndClose(JsonConvert.DeserializeObject<YahooData>(AMZN).Chart.Result[0]);
            
        }
        public static List<TimeAndPrice> getNFLX()
        {
            return getTimestampAndClose(JsonConvert.DeserializeObject<YahooData>(NFLX).Chart.Result[0]);
        }
        public static List<TimeAndPrice> getGOOG()
        {
            return getTimestampAndClose(JsonConvert.DeserializeObject<YahooData>(GOOG).Chart.Result[0]);
        }
        public static List<TimeAndPrice> getFB()
        {
            return getTimestampAndClose(JsonConvert.DeserializeObject<YahooData>(FB).Chart.Result[0]);
        }

        private static List<TimeAndPrice> getTimestampAndClose(Result r)
        {
            Adjclose closePrices = r.Indicators.Adjclose[0];

            List<TimeAndPrice> l = new List<TimeAndPrice>();
            for (var i = 0; i < r.Timestamp.Length; i++)
            {
                l.Add(new TimeAndPrice
                {
                    ts = r.Timestamp[i],
                    px = closePrices.AdjcloseAdjclose[i]

                });
            }
            return l;
        }
    }
}
